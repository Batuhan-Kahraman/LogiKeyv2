@model EntityLayer.Concrate.Tasima

@{
    ViewData["Title"] = "Taşıma Ekle";
}
<script>
    var items = 1;
    var satirVeUrunSayisi = [];

    satirVeUrunSayisi.push({ satir: 1, urun: 1 });
</script>

<div class="col-lg-10 col-xxl-11">
    @if (TempData["Msg"] != null)
    {
        <div class="d-flex">
            <div class="toast show align-items-center text-white dark__text-gray-1100 border-0 m-3" role="alert" data-bs-autohide="false" aria-live="assertive" aria-atomic="true" style="background:@TempData["Bgcolor"]">
                <div class="d-flex">
                    <div>
                        @TempData["Msg"]
                    </div>

                </div>
            </div>
        </div>

    }

    <div class="border table-responsive scrollbar p-2">
        <form method="post" action="TasimaEkle">
            <table class="table table-borderless">
                <tr>
                    <td rowspan="6" colspan="1" style="width:50px; margin-right:10px;background:#02224b" class="vertical-text text-center" style="background:#a9a4a4;">
                        <h5 style="color:#fff !important;">Araç</h5>
                    </td>
                    <td>Araç</td>
                    <td>
                        <select class="form-control" asp-for="Arac_ID" id="Arac_ID">
                            <option value="0">Seçiniz</option>
                            @foreach (var arac in ViewBag.Araclar)
                            {
                                <option value="@arac.ID">@arac.Plaka</option>

                            }
                        </select>
                    </td>

                    <td>Taşıma Tipi</td>
                    <td>
                        <select class="form-control" asp-for="TasimaTipi_ID" id="TasimaTipi_ID">
                            <option value="0">Seçiniz</option>
                            @foreach (var tasimatip in ViewBag.tasimaTipi)
                            {
                                <option value="@tasimatip.ID">@tasimatip.Adi</option>

                            }
                        </select>
                    </td>
                    <td>Araç Türü</td>
                    <td>
                        <select class="form-control" asp-for="AracTuru_ID" id="AracTuru_ID">
                            <option value="0">Seçiniz</option>
                            @foreach (var aracTur in ViewBag.aracTur)
                            {
                                <option value="@aracTur.ID">@aracTur.Adi</option>


                            }
                        </select>

                    </td>
                </tr>
                <tr>
                    <td>Sürücü 1 Ekle</td>
                    <td>
                        <select class="form-control" asp-for="Surucu1_ID" id="Surucu1_ID">
                            <option value="0">Seçiniz</option>
                            @foreach (var surucu in ViewBag.Suruculer)
                            {
                                <option value="@surucu.ID">@surucu.Isim-@surucu.Soyisim</option>

                            }
                        </select>
                    </td>
                    <td>Sürücü 2 Ekle</td>
                    <td>
                        <select class="form-control" asp-for="Surucu2_ID" id="Surucu2_ID">
                            <option value="0">Seçiniz</option>
                            @foreach (var surucu in ViewBag.Suruculer)
                            {
                                <option value="@surucu.ID">@surucu.Isim-@surucu.Soyisim</option>

                            }
                        </select>
                    </td>
                    <td>Sürücü 3 Ekle</td>
                    <td>
                        <select class="form-control" asp-for="Surucu3_ID" id="Surucu3_ID">
                            <option value="0">Seçiniz</option>
                            @foreach (var surucu in ViewBag.Suruculer)
                            {
                                <option value="@surucu.ID">@surucu.Isim-@surucu.Soyisim</option>

                            }
                        </select>
                    </td>

                </tr>
                <tr>
                    <td>Çekici Plakası</td>
                    <td>

                        <select class="form-control" asp-for="CekiciPlaka_ID" id="CekiciPlaka_ID">
                            <option value="0">Seçiniz</option>
                            @foreach (var arac in ViewBag.CekiciPlaka)
                            {
                                <option value="@arac.ID">@arac.Plaka</option>

                            }
                        </select>
                    </td>
                    <td>Dorse Ekle</td>
                    <td>
                        <select asp-for="DorseTipi_ID" class=" form-control" id="DorseTipi_ID">
                            <option value="0">Seçiniz</option>
                            @foreach (var arac in ViewBag.DorseListe)
                            {
                                <option value="@arac.ID">@arac.Adi</option>

                            }

                        </select>
                    </td>
                    <td>Dorse Plakası</td>
                    <td>
                        <select asp-for="DorsePlaka_ID" class=" form-control" id="Arac_ID">
                            <option value="0">Seçiniz</option>
                            @foreach (var arac in ViewBag.DorsePlaka)
                            {
                                <option value="@arac.ID">@arac.Plaka</option>

                            }
                        </select>
                    </td>

                </tr>
                <tr>
                    <td>Göz 1</td>
                    <td>
                        <input type="number" class="form-control bg-light" asp-for="AracGoz1" value="0" readonly />
                        <input type="text" class="form-control bg-light" name="AracGoz1UrunID" id="AracGoz1UrunID" readonly />
                    </td>

                    <td>Göz 2</td>
                    <td><input type="number" class="form-control bg-light" asp-for="AracGoz2" value="0" readonly /><input type="text" class="form-control bg-light" name="AracGoz2UrunID" id="AracGoz2UrunID" readonly /></td>
                    <td>Göz 3</td>
                    <td><input type="number" class="form-control bg-light" asp-for="AracGoz3" value="0" readonly /><input type="text" class="form-control bg-light" name="AracGoz3UrunID" id="AracGoz3UrunID" readonly /></td>
                </tr>
                <tr>
                    <td>Göz 4</td>
                    <td><input type="number" class="form-control bg-light" asp-for="AracGoz4" value="0" readonly /><input type="text" class="form-control bg-light" name="AracGoz4UrunID" id="AracGoz4UrunID" readonly /></td>
                    <td>Göz 5</td>
                    <td><input type="number" class="form-control bg-light" asp-for="AracGoz5" value="0" readonly /><input type="text" class="form-control bg-light" name="AracGoz5UrunID" id="AracGoz5UrunID" readonly /></td>
                    <td>Göz 6</td>
                    <td><input type="number" class="form-control bg-light" asp-for="AracGoz6" value="0" readonly /><input type="text" class="form-control bg-light" name="AracGoz6UrunID" id="AracGoz6UrunID" readonly /></td>
                </tr>
                <tr>

                    <td>Toplam Yüklenen Miktar</td>
                    <td colspan="5"><input type="text" class="form-control bg-light w-100" asp-for="ToplamYuklenenMiktar" id="ToplamYuklenenMiktar" readonly /></td>
                   

                </tr>
            </table>



            <div class="accordion" id="accordionExample">
                <div class="accordion-item border-top">
                    <h2 class="accordion-header" id="heading1">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapse1" aria-expanded="false" aria-controls="collapse1">
                            1.KAYIT
                        </button>
                    </h2>
                    <div class="accordion-collapse collapse" id="collapse1" aria-labelledby="heading1" data-bs-parent="#accordionExample" style="">
                        <div class="accordion-body pt-0">
                            <table class="table table-borderless" id="kayit1">
                             

                                <!-- Gönderici -->
                                <tr>
                                    <td rowspan="2" colspan="1" style="width:50px; margin-right:10px;background:#0a4ea5" class="vertical-text text-center">
                                        <h5 style="color:#fff !important;"> Gönderici Firma</h5>
                                    </td>
                                    <td>Mal Sahibi</td>
                                    <td>
                                        <select name="GondericiCari_ID[]" class=" form-control" id="GondericiCari_ID1">
                                            <option value="0">Seçiniz</option>
                                            @foreach (var item in ViewBag.GondericiListesi)
                                            {

                                                <option value="@item.Cari_ID">@item.Cari_Unvan</option>
                                            }

                                        </select>
                                    </td>
                                    <td>Mal Yükleme İl</td>
                                    <td>
                                        <select class="form-control" name="MalYuklemeAdres_IL_ID[]" id="MalYuklemeAdres_IL_ID1" onchange="IlDegistir(this.value)">
                                            <option value="0">Seçiniz</option>

                                            @foreach (var item in ViewBag.Iller)
                                            {

                                                <option value="@item.IL_KODU">@item.Il</option>
                                            }

                                        </select>
                                    </td>
                                    <td>Mal Yükleme İlçe</td>
                                    <td>
                                        <select class="form-control" name="MalYuklemeAdres_ILCE_ID[]" id="MalYuklemeAdres_ILCE_ID1">
                                            <option value="0">Seçiniz</option>



                                        </select>
                                    </td>
                                </tr>
                                <tr style="border-bottom: 1px solid #ddd; margin-bottom:2%;">

                                    <td>Mal Yükleme Tarih Saat</td>
                                    <td colspan="5"><input type="date" class="form-control" name="GondericiFirmaTarihSaat[]" id="GondericiFirmaTarihSaat1" /></td>

                                </tr>

                                <!-- Alıcı -->
                                <tr>
                                    <td rowspan="2" colspan="1" style="width:50px; margin-right:10px;background:#0e65d5" class="vertical-text text-center">
                                        <h5 style="color:#fff !important;"> Alıcı Firma</h5>
                                    </td>
                                    <td>Alıcı Firma</td>
                                    <td>
                                        <select name="AliciCari_ID[]" class=" form-control" id="AliciCari_ID1">
                                            <option value="0">Seçiniz</option>


                                            @foreach (var item in ViewBag.AliciListesi)
                                            {

                                                <option value="@item.Cari_ID">@item.Cari_Unvan</option>
                                            }

                                        </select>
                                    </td>
                                    <td>İndirilen İl</td>
                                    <td>
                                        <select class="form-control" name="IndirilenAdres_IL_ID[]" id="IndirilenAdres_IL_ID1" onchange="IndirilenIlDegistir(this.value)">
                                            <option value="0">Seçiniz</option>

                                            @foreach (var item in ViewBag.Iller)
                                            {

                                                <option value="@item.IL_KODU">@item.Il</option>
                                            }
                                        </select>
                                    </td>
                                    <td>İndirilen İlçe</td>
                                    <td>
                                        <select class="form-control" name="IndirilenAdres_ILCE_ID[]" id="IndirilenAdres_ILCE_ID1">
                                            <option value="0">Seçiniz</option>


                                        </select>
                                    </td>

                                </tr>
                                <tr style="border-bottom: 1px solid #ddd; margin-bottom:2%;">

                                    <td>Alıcı Tarih Saat</td>
                                    <td colspan="5"><input type="date" class="form-control" name="AliciFirmaTarihSaat[]" id="AliciFirmaTarihSaat1" /></td>

                                </tr>
                                
                                <!-- Ürün -->
                                <tr id="templateRow1_1">

                                    <td rowspan="2" colspan="1" style="width:50px; margin-right:10px;background:#06326b" class="vertical-text text-center">
                                        <h5 style="color:#fff !important;"> Ürün</h5>
                                    </td>
                                    <td style="width: 17%;">
                                        Un Kodu Seç
                                    </td>
                                    <td style="width: 17%;">
                                        <select name="Un_ID[]" class=" form-control" id="Un_ID1_1">
                                            <option value="0">Seçiniz</option>

                                            @foreach (var Un in ViewBag.UnListesi)
                                            {
                                                <option value="@Un.Un_ID">@Un.Un_No - @Un.Un_Isim</option>
                                            }
                                        </select>
                                    </td>
                                    <td>Ürün Seç</td>
                                    <td>
                                        <select name="TasinacakUrun_ID[]" class=" form-control" id="TasinacakUrun_ID1_1" onchange="GozlereDagit(1)">
                                            <option value="0">Seçiniz</option>

                                            @foreach (var item in ViewBag.TasinacakUrun)
                                            {
                                                <option value="@item.ID">@item.Adi</option>
                                            }

                                        </select>
                                    </td>

                                    <td>Yükleme Miktarı</td>
                                    <td><input type="number" class="form-control" name="YuklemeMiktari[]" onchange="GozlereDagit(1)" id="YuklemeMiktari1_1" /></td>
                                </tr>
                                <tr style="border-bottom: 1px solid #ddd; margin-bottom:2%;" id="templateRow1_2">
                                    <td>Ödeme Yapan Cari</td>
                                    <td>
                                        <select name="Cari_Odeme_Yapan[]" class=" form-control" id="Cari_Odeme_Yapan1_1">
                                            <option value="0">Seçiniz</option>
                                            <option value="1">Göncerici</option>
                                            <option value="2">Alıcı</option>
                                            <!-- seçilene göre ödeme yapan carinin idsi alınıcak -->
                                        </select>
                                    </td>
                                    <td>Ücretlendirme</td>
                                    <td>
                                        <select name="Ucretlendirme_ID[]" class=" form-control" id="Ucretlendirme_ID1_1">
                                            <option value="0">Seçiniz</option>
                                            <option value="1">Birim Fiyat</option>
                                            <option value="2">Sefer</option>

                                        </select>
                                    </td>
                                    <td>Birim veya Sefer Fiyatı</td>
                                    <td><input type="number" class="form-control" name="Birim_SeferFiyat[]" id="Birim_SeferFiyat1_1" /></td>

                                </tr>
                               
                                <tr id="urunEkleTR1">
                                    <td colspan="6"><a class="btn btn-info col-3" onclick="urunEkle(1)">Ürün Ekle</a></td>
                                </tr>
                                </table>

                            <table class="table table-borderless">
                                <!-- Nakliye hesaplama -->
                                <tr>
                                    <td colspan="1" style="width:50px; margin-right:10px;background:#589cf3" class="vertical-text text-center">
                                        <h5 style="color:#fff !important;"> Nakliye Bedeli</h5>
                                    </td>
                                    <td>Tutar(KDV Hariç)</td>
                                    <td>
                                        <input type="number" class="form-control" name="NakliyeBedelTutar_KDVsiz[]" id="NakliyeBedelTutar_KDVsiz1" />
                                    </td>

                                    <td>Kdv</td>
                                    <td>
                                        <input type="number" class="form-control" name="NakliyeBedelTutar_KDV[]" id="NakliyeBedelTutar_KDV1" />
                                    </td>
                                    <td>Toplam</td>
                                    <td><input type="text" class="form-control" name="NakliyeBedeliToplam_KDVli[]" id="NakliyeBedeliToplam_KDVli1" /></td>

                                </tr>
                            </table>

                        </div>
                    </div>
                </div>

            </div>
            <center class="mt-4">

                <a class="btn btn-info col-3" onclick="kaydetEkle()">Kaydet Ve Ekle</a>

                <input type="submit" class="btn btn-success col-3" value="Taşımayı Kaydet" />
            </center>



        </form>
    </div>


</div>
@section Scripts {

    <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
    <script>
        $(document).ready(function () {
            $('#uyariModal').modal('show');
        });

        function IlDegistir(IlKodu) {

            $.ajax({
                url: '../Ajax/IlceListe', // Verileri sağlayan API'nin endpoint'i
                method: 'GET',
                data: { IlKodu: IlKodu },
                dataType: 'json',
                success: function (data) {
                    $('#MalYuklemeAdres_ILCE_ID').empty();
                    $('#MalYuklemeAdres_ILCE_ID').append($('<option>', {
                        value: 0, // Verinin değer özelliği
                        text: "Seçiniz" // Verinin görünen metni
                    }));
                    // Verileri selectbox'a ekle
                    $.each(data, function (index, item) {
                        console.log(item);
                        $('#MalYuklemeAdres_ILCE_ID').append($('<option>', {
                            value: item.ilcE_KODU, // Verinin değer özelliği
                            text: item.ilce // Verinin görünen metni
                        }));
                    });
                },
                error: function (error) {
                    console.log('Hata oluştu:', error);
                }
            });
        }

        function IndirilenIlDegistir(IlKodu) {

            $.ajax({
                url: '../Ajax/IlceListe', // Verileri sağlayan API'nin endpoint'i
                method: 'GET',
                data: { IlKodu: IlKodu },
                dataType: 'json',
                success: function (data) {
                    $('#IndirilenAdres_ILCE_ID').empty();
                    $('#IndirilenAdres_ILCE_ID').append($('<option>', {
                        value: 0, // Verinin değer özelliği
                        text: "Seçiniz" // Verinin görünen metni
                    }));
                    // Verileri selectbox'a ekle
                    $.each(data, function (index, item) {
                        console.log(item);
                        $('#IndirilenAdres_ILCE_ID').append($('<option>', {
                            value: item.ilcE_KODU, // Verinin değer özelliği
                            text: item.ilce // Verinin görünen metni
                        }));
                    });
                },
                error: function (error) {
                    console.log('Hata oluştu:', error);
                }
            });
        }

        function kaydetEkle() {
            items++;

            satirVeUrunSayisi.push({ satir: items, urun: 1 });
            // Create a new accordion item
            var accordionItem = document.createElement('div');
            accordionItem.className = 'accordion-item';

            // Create the accordion header
            var header = document.createElement('h2');
            header.className = 'accordion-header';
            header.id = 'heading' + items;

            // Create the button for collapsing/expanding
            var button = document.createElement('button');
            button.className = 'accordion-button collapsed';
            button.type = 'button';
            button.setAttribute('data-bs-toggle', 'collapse');
            button.setAttribute('data-bs-target', '#collapse' + items);
            button.setAttribute('aria-expanded', 'false');
            button.setAttribute('aria-controls', 'collapse' + items);
            button.innerText = items + '.KAYIT';

            // Append button to the header
            header.appendChild(button);

            // Create the accordion body
            var body = document.createElement('div');
            body.className = 'accordion-collapse collapse';
            body.id = 'collapse' + items;
            body.setAttribute('aria-labelledby', 'heading' + items);
            body.setAttribute('data-bs-parent', '#accordionExample');

            // Create the content of the accordion body
            var bodyContent = document.createElement('div');
            bodyContent.className = 'accordion-body pt-0';


            bodyContent.innerHTML = '<table class="table table-borderless" id="kayit'+items+'"> <!--Garanti--> <tr><td rowspan="2" colspan = "1" style = "width:50px; margin-right:10px;background:#0a4ea5" class="vertical-text text-center" > <h5 style="color:#fff !important;" > Gönderici Firma </h5 > </td > <td>Mal Sahibi </td > <td><select name="GondericiCari_ID[]" class="form-control" id = "GondericiCari_ID' + items + '" > <option value="0" > Seçiniz </option >'+
        '@foreach (var item in ViewBag.GondericiListesi){<option value="@item.Cari_ID" > @item.Cari_Unvan</option>}'+
        '</select > </td > <td>Mal Yükleme İl </td > <td><select class="form-control" name = "MalYuklemeAdres_IL_ID[]" id = "MalYuklemeAdres_IL_ID' + items + '" onchange = "IlDegistir(this.value)" > <option value="0" > Seçiniz </option >'+
        '@foreach (var item in ViewBag.Iller){<option value="@item.IL_KODU" > @item.Il</option>}'
        +'</select > </td > <td>Mal Yükleme İlçe </td > <td><select class="form-control" name = "MalYuklemeAdres_ILCE_ID[]" id = "MalYuklemeAdres_ILCE_ID' + items + '" > <option value="0" > Seçiniz </option > </select > </td > </tr > <tr style="border-bottom: 1px solid #ddd; margin-bottom:2%;" > <td>Mal Yükleme Tarih Saat </td > <td colspan="5" > <input type="date" class="form-control" name = "GondericiFirmaTarihSaat[]" id = "GondericiFirmaTarihSaat' + items + '" / > </td></tr > <!--Araç Belgeleri--> <tr><td rowspan="2" colspan = "1" style = "width:50px; margin-right:10px;background:#0e65d5" class="vertical-text text-center" > <h5 style="color:#fff !important;" > Alıcı Firma </h5></td > <td>Alıcı Firma </td><td><select name="AliciCari_ID[]" class="form-control" id="AliciCari_ID' + items + '"><option value="0">Seçiniz</option >'+
        '@foreach (var item in ViewBag.AliciListesi){<option value="@item.Cari_ID" > @item.Cari_Unvan</option>}'+
        '</select > </td > <td>İndirilen İl </td > <td><select class="form-control" name = "IndirilenAdres_IL_ID[]" id = "IndirilenAdres_IL_ID' + items + '" onchange = "IndirilenIlDegistir(this.value)" > <option value="0" > Seçiniz </option > '+
        '@foreach (var item in ViewBag.Iller){<option value="@item.IL_KODU">@item.Il</option >}'+
                '</select></td > <td>İndirilen İlçe </td><td><select class="form-control" name="IndirilenAdres_ILCE_ID[]" id="IndirilenAdres_ILCE_ID' + items + '"><option value="0">Seçiniz</option > </select></td > </tr><tr style="border-bottom: 1px solid #ddd; margin-bottom:2%;"><td>Alıcı Tarih Saat</td > <td colspan="5" > <input type="date" class="form-control" name = "AliciFirmaTarihSaat[]" id = "AliciFirmaTarihSaat' + items + '" /> </td></tr ><tr id = "templateRow'+items+'_1" ><td rowspan="2" colspan = "1" style = "width:50px; margin-right:10px;background:#06326b" class="vertical-text text-center" ><h5 style="color:#fff !important;" > Ürün </h5></td><td style = "width: 17%;" >Un Kodu Seç</td><td style = "width: 17%;" ><select name="Un_ID[]" class=" form-control" id = "Un_ID'+items+'_1" ><option value="0" > Seçiniz </option>'+
                '@foreach (var Un in ViewBag.UnListesi){<option value="@Un.Un_ID" > @Un.Un_No - @Un.Un_Isim</option>}'+
                '</select></td><td > Ürün Seç </td><td><select name="TasinacakUrun_ID[]" class=" form-control" id = "TasinacakUrun_ID'+items+'_1" onchange = "GozlereDagit(1)" ><option value="0" > Seçiniz </option>'+
        '@foreach (var item in ViewBag.TasinacakUrun){<option value="@item.ID" > @item.Adi</option>}'+
            '</select></td><td> Yükleme Miktarı </td><td> <input type="number" class="form-control" name = "YuklemeMiktari[]" onchange = "GozlereDagit(1)" id = "YuklemeMiktari'+items+'_1" /> </td></tr><tr style = "border-bottom: 1px solid #ddd; margin-bottom:2%;" id = "templateRow'+items+'_2" ><td>Ödeme Yapan Cari </td><td><select name="Cari_Odeme_Yapan[]" class=" form-control" id = "Cari_Odeme_Yapan'+items+'_1" ><option value="0" > Seçiniz </option><option value = "1" > Göncerici </option><option value = "2" > Alıcı </option></select></td><td > Ücretlendirme </td><td><select name="Ucretlendirme_ID[]" class=" form-control" id = "Ucretlendirme_ID'+items+'_1" ><option value="0" > Seçiniz </option><option value = "1" > Birim Fiyat </option>< option value = "2" > Sefer </option></select></td><td> Birim veya Sefer Fiyatı </td><td> <input type="number" class="form-control" name = "Birim_SeferFiyat[]" id = "Birim_SeferFiyat'+items+'_1" /> </td></tr><tr id = "urunEkleTR'+items+'"><td colspan="6" > <a class="btn btn-info col-3" onclick = "urunEkle('+items+')" > Ürün Ekle </a></td ></tr></table > <table class="table table-bordless" > <tr><td colspan="1" style = "width:50px; margin-right:10px;background:#589cf3" class="vertical-text text-center" > <h5 style="color:#fff !important;" > Nakliye Bedeli </h5></td > <td>Tutar(KDV Hariç) </td><td><input type="number" class="form-control" name="NakliyeBedelTutar_KDVsiz[]" id="NakliyeBedelTutar_KDVsiz' + items + '"/ > </td><td>Kdv</td > <td><input type="number" class="form-control" name = "NakliyeBedelTutar_KDV[]" id = "NakliyeBedelTutar_KDV' + items + '" /> </td><td>Toplam</td > <td><input type="text" class="form-control" name = "NakliyeBedeliToplam_KDVli[]" id = "NakliyeBedeliToplam_KDVli' + items + '" /> </td></tr > </table>';



            // Append content to the accordion body
            body.appendChild(bodyContent);

            // Append header and body to the accordion item
            accordionItem.appendChild(header);
            accordionItem.appendChild(body);

            // Append the new accordion item to the accordion container
            var accordionContainer = document.getElementById('accordionExample');
            accordionContainer.appendChild(accordionItem);
        }

        function GozlereDagit(sira) {
           
            var GozID = 6;
            debugger;

            document.getElementById("AracGoz1").value = 0;
            document.getElementById("AracGoz2").value = 0;
            document.getElementById("AracGoz3").value = 0;
            document.getElementById("AracGoz4").value = 0;
            document.getElementById("AracGoz5").value = 0;
            document.getElementById("AracGoz6").value = 0;
            for (var i = 1; i <= items; i++) {
                var eleman = satirVeUrunSayisi.find(function (eleman) {
                    return eleman.satir === i;
                });
                var urunsayisi = eleman.urun;
                for (var k = 1; k <= urunsayisi; k++) {
                    var TasinacakUrun_ID = document.getElementById("TasinacakUrun_ID" +i+"_"+ k).value;
                    var YuklemeMiktari = document.getElementById("YuklemeMiktari" + i + "_" + k).value;
               
                for (var j = 1; j <= 6; j++) {
                    if (document.getElementById("AracGoz" + j + "UrunID").value == "" || document.getElementById("AracGoz" + j + "UrunID").value == TasinacakUrun_ID) {
                        document.getElementById("AracGoz" + j + "UrunID").value = TasinacakUrun_ID;
                        if (YuklemeMiktari == "")
                            YuklemeMiktari = 0;
                        
                            document.getElementById("AracGoz" + j).value = parseFloat(document.getElementById("AracGoz" + j).value) + parseFloat(YuklemeMiktari);
                        
                        break;
                    }
                }
                }
               
            }




        }

        function urunEkle(sira) {
            debugger;
            var bulunanElemanIndex = satirVeUrunSayisi.findIndex(function (eleman) {
                return eleman.satir === sira;
            });

            var urunsayisi = satirVeUrunSayisi[bulunanElemanIndex].urun;

                // Urun değerini artır
            urunsayisi += 1;

                // Urun değerini güncelle
            satirVeUrunSayisi[bulunanElemanIndex].urun = urunsayisi;
            

            var table = document.getElementById("kayit"+sira);

            // Clone the template rows
            var clonedRow1 = document.getElementById("templateRow"+sira+"_1").cloneNode(true);
            var clonedRow2 = document.getElementById("templateRow" + sira + "_2").cloneNode(true);

            // Update the IDs of the cloned rows
            updateIds(clonedRow1, urunsayisi);
            updateIds(clonedRow2, urunsayisi);
            // Add a class to cloned rows for styling
            clonedRow1.classList.add("cloned-row");
            clonedRow2.classList.add("cloned-row");

            // Find the "Ürün Ekle" button's parent row
            var buttonRow = document.querySelector('#kayit'+sira+' tr:last-child');

            // Insert the cloned rows before the button row
            buttonRow.parentNode.insertBefore(clonedRow1, buttonRow);
            buttonRow.parentNode.insertBefore(clonedRow2, buttonRow);
        }

        function updateIds(row, index) {
            // Update the ID of the cloned rows
            var newRowId =  index;
            row.id = "row" + newRowId;

            // Update the IDs of all input fields within the cloned rows
            var inputs = row.querySelectorAll('input, select');
            inputs.forEach(function (input) {
                var oldId = input.id;
                if (oldId) {
                    input.id = oldId.replace(/\d+$/, newRowId);
                }
                // Check if it's an input element
                if (input.tagName.toLowerCase() === 'input') {
                    input.value = ''; // Clear the input value
                }

                // Check if it's a select element
                if (input.tagName.toLowerCase() === 'select') {
                    input.value = '0'; // Assuming the default value is '0', change it accordingly
                }
            });
        }

            </script>
}


